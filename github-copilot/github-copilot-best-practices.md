# GitHub Copilot Chat best practices

<!-- tl;dr starts -->

This platform's potential is limitless.

<!-- tl;dr ends -->

## TWO different GitHub Copilot Chat interfaces

1. [Web-based UI](https://github.com/copilot)
2. [VSCode Extension](https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-chat)

You can access GitHub Copilot Chat either via or VSCode Extension

> [!NOTE]
>
> GitHub Copilot and GitHub Copilot **Chat** are two different extensions:
>
> - GitHub Copilot is an extension that suggests inline code as you type, similar to Tabnine.
> - GitHub Copilot Chat is an AI-powered chat extension that provides conversational assistance and advanced code help within your editor. GitHub Copilot Chat depends on the GitHub Copilot extension to function.

## Customize GitHub Copilot Chat responses

Imagine your team have a set of standards that can be expressed in natural language and you want **every chat outputs in the context of the repository** to follow those standards.

Rules should be per-project, you should create `.vscode/settings.json` and define instruction directly in settings using `text` property. However, if the instructions are too long, reference an external file using `file` property.

> **NOTE**: At the time of writing this post, `file` and `language` property didn't work so I resolved to **Prompt files**.

2. **Prompt files:** imagine you have a prompt that you're re-using again and again, you would like to store that prompt in a Markdown file and re-use it in your chat prompts.

> VSCode only, Web-based UI not supported.

`.vscode/settings.json`:

```json
{
  "chat.promptFiles": true
}
```

`.github/prompts/til.prompt.md`:

```md
Ignore code blocks.
Check grammar.
Improve technical word choice.
```

`.github/prompts/test.prompt.md`:

```md
Include edge cases.
Always try uniting related tests in a suite.
```

## FIVE different types of custom instructions

> **NOTE:** Create a `.vscode/settings.json` file to apply per-workspace rules.

<!-- prettier-ignore -->
| Type of instruction | Availability | Settings and Examples |
| --- | --- | --- |
| **Code generation** | <ul><li>Chat view, Quick Chat, Inline Chat.</li><li>Doesn't apply to Code Completions.</li></ul> | <ul><li>`.github/copilot-instructions.md`</li><li>`github.copilot.chat.codeGeneration.instructions`</li></ul> | <pre>{<br>  "github.copilot.chat.codeGeneration.instructions": [<br>    {<br>      "text": "Always add a comment: 'Generated by Copilot'."<br>    },<br>    {<br>      "text": "In TypeScript always use underscore for private field names."<br>    },<br>    {<br>      "text": "Always use React functional components."<br>    }<br>  ]<br>}</pre> |
| **Test generation** | <ul><li>Chat view/Quick Chat: `@workspace /tests`</li><li>Select code, then open Inline Chat: `/tests`</li></ul> | <pre>{<br>  "github.copilot.chat.testGeneration.instructions": [<br>    {<br>      "text": "Always use vitest for testing React components."<br>    },<br>    {<br>      "text": "Use Jest for testing JavaScript code."<br>    }<br>  ]<br>}</pre> |
| **Code review** | `Ctrl + Shift + P` → `GitHub Copilot: Review and Comment` | <pre>{<br>  "github.copilot.chat.reviewSelection.instructions": [<br>    {<br>      "text": "Ensure all endpoints are protected by authentication and authorization."<br>    },<br>    {<br>      "text": "Validate all user inputs and sanitize data."<br>    },<br>    {<br>      "text": "Implement rate limiting and throttling."<br>    },<br>    {<br>      "text": "Implement logging and monitoring for security events."<br>    }<br>  ]<br>}</pre> |
| **Commit message generation** | Source Control view → Sparkle icon | `github.copilot.chat.commitMessageGeneration.instructions`: [`Enforce conventional commits`](https://www.conventionalcommits.org/en/v1.0.0/) |
| **PR title and description generation** | Don't know yet | <pre>{<br>  "github.copilot.chat.pullRequestDescriptionGeneration.instructions": [<br>    {<br>      "text": "Include every commit message in the pull request description."<br>    }<br>  ]<br>}</pre> |

> I don't know if Code Generation instructions get mixed in other instruction types. It's best to specify instructions type other than Code Generation first.

Custom instructions should be tailored according to your use cases. Don't mindlessly apply shiny and dangerously-looked other engineers' custom instructions.

## Context providing mechanisms (until 2025-05-02)

<!-- prettier-ignore -->
| Mechanism | Use case | Avaiability | Options |
| --- | --- | --- | --- |
| [Chat participants](https://docs.github.com/en/copilot/using-github-copilot/copilot-chat/github-copilot-chat-cheat-sheet#chat-participants) | Populate high-level _context_ | <ul><li>Chat view</li><li>Quick Chat</li></ul> | <pre>@workspace - Ask about your workspace<br>@vscode - Ask questions about VS Code<br>@terminal - Ask how to do something in the terminal<br>@github - Get answers grounded in web search, code search, and your enterprise's knowledge bases</pre> |
| [Slash commands](https://docs.github.com/en/copilot/using-github-copilot/copilot-chat/github-copilot-chat-cheat-sheet#slash-commands-1) | Under a **Chat participants**, populate a blackboxing code-related _instruction_ | <ul><li>Chat view</li><li>Quick Chat</li><li>Inline Chat (limited, 6 options only)</li></ul> | <pre>@workspace - Ask about your workspace<br>/explain - Explain how the code in your active editor works<br>/tests - Generate unit tests for the selected code<br>/fix - Propose a fix for the problems in the selected code<br>/new - Scaffold code for a new file or project in a workspace<br>/newNotebook - Create a new Jupyter Notebook<br>/setupTests - Set up tests in your project (Experimental)<br>@vscode - Ask questions about VS Code<br>/search - Generate query parameters for workspace search<br>/startDebugging - Generate launch config and start debugging in VS Code (Experimental)<br>@terminal - Ask how to do something in the terminal<br>/explain - Explain something in the terminal<br>@github - Get answers grounded in web search, code search, and your enterprise's knowledge bases</pre> |
| [Chat variables](https://docs.github.com/en/copilot/using-github-copilot/copilot-chat/github-copilot-chat-cheat-sheet#chat-variables) | Populate fine-grained _input data_ and _context_ | <ul><li>Chat view (13 variables)</li><li>Quick Chat (10 variables)</li><li>Inline Chat (13 variables, similar to Chat view)</li></ul> | <pre>#changes<br>#codebase<br>#fetch<br>#file<br>#findTestFiles<br>#folder<br>#searchResults<br>#sym<br>#terminalLastCommand<br>#terminalSelection<br>#testFailure<br>#usages<br>#vscodeAPI</pre> |
| [Repository custom instructions and Prompt Files](https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot#about-repository-custom-instructions-and-prompt-files-for-github-copilot-chat) | Populate per-project _context_ | <ul><li>Chat view</li><li>Quick Chat</li><li>Inline Chat</li></ul> | [Specified above](#customize-github-copilot-chat-responses) |
| [Add context](https://code.visualstudio.com/docs/copilot/chat/copilot-chat-context) | Similar to Chat variables and Prompt Files | Chat view and Quick Chat | `Add context...` |
| [Different custom instruction types in workspace or user settings](https://code.visualstudio.com/docs/copilot/copilot-customization#_use-settings) | Populate **five** (for now) different blackboxing code-related _instruction_ and _context_ | Chat view (only?) | [Specified above](#five-different-types-of-custom-instructions) |

> **NOTE:** You can see that there are a lot of overlap in feature. The GitHub Copilot Chat extension is actively under development so major breaking changes may be introduced in the future.

## [Making Copilot Chat an expert in your workspace](https://code.visualstudio.com/docs/copilot/reference/workspace-context)

Chat participant `@workspace` lets you use your existing codebase as context when prompting.

Here are the list of data sources that will be included:

- **Indexable files:** they are text files that are part of current project.

  Here are the list of non-indexable files:

  - Files and directories specified in `.gitignore`, except for files that are currently opened or have text selection within them.
  - Typically unrelated file types: `.tmp`, `.out`, ...
  - Binary files: images, PDFs, ...
  - `settings.json`'s `files.exclude` setting.

  There are three types of indexes, ordered from least to most robust: **basic index**, **local index**, and **remote index**.

  - If your project has under 750 indexable files, local index is built **automatically**.
  - If your project has 750-2500 indexable files, local index must be built **manually** via `Ctrl + Shift + P` -> `GitHub Copilot: Build Local Workspace Index`. Subsequent builds are faster than initial build.
  - If your project has more than 2500 indexable files, local index can't be built, only remote index can via `Ctrl + Shift + P` > `GitHub Copilot: Build Remote Workspace Index`.
  - If your project has more than 2500 indexable files and does not have a remote index, basic index is used.

- Directory structure with nested folder and file names.
- GitHub's code search index (if the workspace is a GitHub repository and indexed by code search, )
- Symbols and definitions in the workspace.
- Currently selected text or visible text in the active editor.
- Conversation history (follow-up prompts).

> **NOTE:** The context is blackboxed and wasn't visible to user, personally I would like a more transparent solution.

> **CAUTION:** Copilot Chat stated that [it will not use the indexed repository for model training](https://docs.github.com/en/copilot/using-github-copilot/copilot-chat/indexing-repositories-for-copilot-chat#benefit-of-indexing-repositories). I don't know if it can be trusted.

## General tips for writing custom instructions

> Yet another prompt engineering practice.

- Do use simple, clear and concise language to describe your coding guideline.
- Do be as specific as possible about what Copilot should look for - that is, what you do or don't want to see in your code.
- Do take a look at the Coding guidelines examples below for some inspiration.
- Do reuse your ad-hoc prompt yet running multiple times by creating a Prompt File.
- Do beautify your instructions into a single paragraph, each on a new line, or separated by blank lines for legibility, since whitespace between instructions is ignored.

- Don't use coding guidelines to enforce style guidelines that can be covered by your linter or static analysis tool.
- Don't use wording that is ambiguous or could be interpreted in different ways.
- Don't fit multiple different ideas into a single coding guideline.

Consider the size and complexity of the repository to do and don't do the following:

- Refer to external resources.
- Instructions to answer in a particular style.
- Always respond with a certain level of detail.

## [Code review](https://docs.github.com/en/copilot/using-github-copilot/code-review/using-copilot-code-review?tool=vscode)

There are **TWO** types:

- **Review selection:** (VSCode-only) Highlight code and ask for an initial review.
- **Review changes:**
  - [(VSCode)](https://docs.github.com/en/copilot/using-github-copilot/code-review/using-copilot-code-review?tool=vscode#working-with-suggested-changes-provided-by-copilot-1) Before creating a Pull Request, contributor can request a review to the changes firsthand. (AI can do part of human code auditors' jobs). [Setup at Repository settings using Web UI](https://docs.github.com/en/copilot/using-github-copilot/code-review/configuring-coding-guidelines).
  - [(Web UI)](https://docs.github.com/en/copilot/using-github-copilot/code-review/using-copilot-code-review?tool=webui#working-with-suggested-changes-provided-by-copilot) After creating a Pull Request, contributor can choose Copilot as the reviewer.

Project owners now can leverage **CONTRIBUTING.md** with custom instructions for code review using GitHub Copilot Chat.

> The power of OSS and FOSS is the community. Anyone can contribute their code to the repository, from the developer and maintainer team who knows the project like the back of their hand to the non-official developers happens to come across the project. But the latter aren't taught or trained to apprehand the coding standard, they solely rely on the documentation and communication methods to the official team through GitHub Issue/Discord/... worse, the existing code itself. Therefore, the code can be bad (or "smelly"), giving the reviewer a hard time to read.

## Web Browser Chat Instructions

This feature came out on [2025-02-14 change log](https://github.blog/changelog/2025-02-14-personal-custom-instructions-bing-web-search-and-more-in-copilot-on-github-com/), applies when using GitHub Copilot Chat on [https://github.com/copilot/](https://github.com/copilot/).

User can specify custom preferences using natural languages. I personally do not recommend users to try to write their own preferences if they don't know how to express it with their own word. Their response can be worse than one without the preferences and they wouldn't even know about it.

Instead:

- On Web UI, preference template can be generated by clicking the light blub in the bottom-right corder of the instructions textarea.
- Use dedicated prompts directory as reference such as [https://prompts.chat/](https://prompts.chat/). Each prompt is designed and tested by experienced Prompt/AI Engineers.
- Take a look at some examples below for inspiration:
  - Language: `Always respond in Vietnamese.`
  - Response: `Be concise and to-the-point. Always cite your sources.`
  - Personal: `You are a seasoned React developer with ten years of experience.`
  - Code: `Always provide examples in Bash.`

My current instructions:

```
You are a seasoned Python developer with over ten years of experience.
When teaching, give practical examples after explaining each concept.
Be concise and to-the-point.
```

## References

- [VSCode Docs's "Customize chat responses in VS Code"](https://code.visualstudio.com/docs/copilot/copilot-customization)
- [GitHub Docs's "About customizing GitHub Copilot Chat responses"](https://docs.github.com/en/copilot/customizing-copilot/about-customizing-github-copilot-chat-responses)
- [GitHub Docs's "Copilot Customization: Tips for defining custom instructions"](https://code.visualstudio.com/docs/copilot/copilot-customization#_tips-for-defining-custom-instructions)
- [GitHub Docs's "Dos and Don'ts for Coding guidelines"](https://docs.github.com/en/copilot/using-github-copilot/code-review/configuring-coding-guidelines#dos-and-donts-for-coding-guidelines)
